<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RO 攻速與頻率計算機 (數學建模版)</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f7f6; display: flex; justify-content: center; padding: 20px; }
        .card { background: white; padding: 30px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); width: 100%; max-width: 400px; }
        h2 { color: #2c3e50; text-align: center; margin-bottom: 25px; }
        .input-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; color: #34495e; }
        input, select { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px; box-sizing: border-box; font-size: 16px; }
        .result-box { margin-top: 25px; padding: 15px; background: #e8f4fd; border-radius: 10px; text-align: center; }
        .result-val { font-size: 28px; font-weight: bold; color: #2980b9; }
        .footer { font-size: 12px; color: #95a5a6; text-align: center; margin-top: 20px; }
    </style>
</head>
<body>

<div class="card">
    <h2>RO 攻速頻率計算機</h2>
    
    <div class="input-group">
        <label>狀態模式</label>
        <select id="mode" onchange="calculate()">
            <option value="weapon">拿弓 (預設)</option>
            <option value="unarmed">空手狀態</option>
        </select>
    </div>

    <div class="input-group">
        <label>AGI (敏捷)</label>
        <input type="number" id="agi" value="153" oninput="calculate()">
    </div>

    <div class="input-group">
        <label>DEX (靈巧)</label>
        <input type="number" id="dex" value="23" oninput="calculate()">
    </div>

    <div class="input-group">
        <label>攻速加成 (%)</label>
        <input type="number" id="bonus" value="10" oninput="calculate()">
    </div>

    <div class="result-box">
        <div style="color: #7f8c8d; font-size: 14px;">預測普攻頻率</div>
        <div class="result-val" id="res_f">0.00</div>
        <div style="font-size: 14px; margin-top: 5px;">次 / 秒</div>
    </div>

    <div class="footer">
        由我要叫什麼名字 研究提供<br>
        基於 0.0000 殘差線性頻率模型
    </div>
</div>

<script>
function calculate() {
    const mode = document.getElementById('mode').value;
    const agi = parseFloat(document.getElementById('agi').value) || 0;
    const dex = parseFloat(document.getElementById('dex').value) || 0;
    const bonus = (parseFloat(document.getElementById('bonus').value) || 0) / 100;

    // 核心參數設定
    let B, D;
    if (mode === 'unarmed') {
        B = 1.1904; D = 63.0;
    } else {
        B = 1.1109; D = 67.5;
    }

    // 1. 計算屬性頻率
    const S = agi + dex / 4;
    const f_base = B + S / D;
    
    // 2. 套用延遲削減邏輯 (1 - bonus)
    const raw_f = f_base / (1 - bonus);

    // 3. 遊戲取整邏輯：先 round 到三位，再 floor 到兩位
    const final_f = Math.floor(Math.round(raw_f * 1000) / 10) / 100;

    document.getElementById('res_f').innerText = final_f.toFixed(2);
}

// 初始計算一次
calculate();
</script>

</body>
</html>
